# Processed data

This folder contains all intermediate and final datasets generated during the data preparation stage.  
All files in this directory are created by the scripts in the `scripts/` folder and can be fully reproduced from the original raw data.

Users should not modify files in this folder manually, as any file can be regenerated by running the corresponding scripts.

The data preparation workflow is organized into three sequential stages: `import`, `select`, and `merge`.

---

## Folder structure

### `import/`

This folder contains datasets converted from their original formats (e.g., `.dta`, `.txt`, `.csv`, `.gpkg`) into the `.rds` format used in R.

Purpose:

- Standardize file formats across all data sources  
- Ensure consistent encoding and structure  
- Improve loading speed and reproducibility  

No variable selection, transformations, or sample restrictions are applied at this stage. Each file corresponds closely to its original raw data source, with only format conversion applied.

These files are generated by the following scripts:

- `01_import_replication_data.R`  
- `02_import_referendum_1946_data.R`  
- `03_import_gis_distance_gustav.R`  

---

### `select/`

This folder contains datasets with the variables selected for the empirical analysis and the harmonized key identifier.

Purpose:

- Retain only variables relevant for the analysis  
- Drop unused variables  
- Harmonize variable names when necessary  
- Define and standardize the key identifier (municipality code)

The municipality code serves as the unique identifier used to merge datasets in the next stage.

These files are generated by the following scripts:

- `04_select_fontana_et_al_data.R`  
- `05_select_gagliarducci_et_al_data.R`  
- `06_select_referendum_1946_data.R`  
- `07_select_gis_distance_gustav_data.R`  

---

### `merge/`

This folder contains the final merged datasets used in the empirical analysis.

Purpose:

- Combine datasets from multiple sources using the municipality code  
- Construct the final analysis sample  
- Produce datasets used directly in the empirical analysis  

Files in this folder serve as the direct input for the analysis scripts and are used to generate all tables and figures in the `results/` directory.

These files are generated by the following script:

- `08_merge_dataset.R`  

---

## Reproducibility

All files in this folder can be regenerated by running the scripts in the `scripts/` folder in numerical order.

The complete workflow is:

1. Import raw data → `import/`  
2. Select variables and define identifiers → `select/`  
3. Merge datasets and construct the final analysis dataset → `merge/`  

No manual data modifications are required at any stage.
